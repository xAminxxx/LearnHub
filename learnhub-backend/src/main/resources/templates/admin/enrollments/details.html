<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/fragments/layout :: html(content=~{::content})}">

<div th:fragment="content">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <div>
                    <h2 class="fw-bold mb-1">Enrollment File #<span th:text="${enrollment.id}">1</span></h2>
                    <p class="text-secondary mb-0">Detailed student-course association and performance metrics.</p>
                </div>
                <div class="d-flex gap-2">
                    <a class="btn btn-outline-secondary btn-sm rounded-pill px-3" th:href="@{/admin/enrollments}">
                        <i class="bi bi-arrow-left me-1"></i> Registry
                    </a>
                    <a class="btn btn-primary btn-sm rounded-pill px-3 shadow-sm" th:href="@{/admin/enrollments/{id}/edit(id=${enrollment.id})}">
                        <i class="bi bi-pencil-square me-1"></i> Edit Record
                    </a>
                </div>
            </div>

            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body p-4 p-md-5">
                    <div class="row g-5">
                        <div class="col-md-6">
                            <h5 class="text-primary fw-bold mb-4 border-bottom pb-2">
                                <i class="bi bi-person-badge me-2"></i>Student Details
                            </h5>
                            <div class="d-flex align-items-center mb-4">
                                <img th:src="'https://ui-avatars.com/api/?name=' + ${enrollment.student.fullName} + '&background=random'" 
                                     class="rounded-circle me-3" width="60" height="60">
                                <div>
                                    <h4 class="fw-bold mb-1" th:text="${enrollment.student.fullName}">John Doe</h4>
                                    <span class="text-secondary" th:text="${enrollment.student.email}">john@example.com</span>
                                </div>
                            </div>
                            <div class="small bg-light p-3 rounded-3 border">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-secondary">Student ID:</span>
                                    <span class="fw-bold" th:text="'#' + ${enrollment.student.id}">#123</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-secondary">Phone:</span>
                                    <span class="fw-bold" th:text="${enrollment.student.phone}">+123...</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <h5 class="text-primary fw-bold mb-4 border-bottom pb-2">
                                <i class="bi bi-journal-text me-2"></i>Course Details
                            </h5>
                            <div class="mb-4">
                                <div class="badge bg-indigo bg-opacity-10 text-indigo mb-2" style="background-color: rgba(79, 70, 229, 0.1); color: #4f46e5;" th:text="${enrollment.course.code}">CS101</div>
                                <h4 class="fw-bold mb-1" th:text="${enrollment.course.name}">Course Name</h4>
                                <span class="text-secondary" th:text="${enrollment.course.specialization.name}">Spec</span>
                            </div>
                            <div class="small bg-light p-3 rounded-3 border">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-secondary">Instructor:</span>
                                    <span class="fw-bold" th:text="${enrollment.course.trainer.fullName}">Dr. Smith</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-secondary">Credits:</span>
                                    <span class="fw-bold" th:text="${enrollment.course.credit} + ' Units'">3 Units</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 mt-4">
                            <h5 class="text-primary fw-bold mb-4 border-bottom pb-2">
                                <i class="bi bi-graph-up-arrow me-2"></i>Performance & Status
                            </h5>
                            <div class="row g-4 align-items-center">
                                <div class="col-md-4">
                                    <div class="p-4 border rounded-3 text-center bg-white shadow-sm">
                                        <div class="text-secondary small mb-2 text-uppercase fw-bold">Current Status</div>
                                        <span class="badge rounded-pill px-4 py-2" 
                                              th:classappend="${enrollment.status.name() == 'ACTIVE' ? 'bg-primary' : 
                                                               (enrollment.status.name() == 'COMPLETED' ? 'bg-success' : 'bg-danger')}"
                                              th:text="${enrollment.status}">
                                            ACTIVE
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="p-4 border rounded-3 text-center bg-white shadow-sm">
                                        <div class="text-secondary small mb-2 text-uppercase fw-bold">Engagement Score</div>
                                        <div th:if="${enrollment.score != null}">
                                            <span class="display-6 fw-bold text-dark" th:text="${enrollment.score}">18.5</span>
                                            <span class="text-secondary">/ 20</span>
                                        </div>
                                        <div th:unless="${enrollment.score != null}" class="text-muted italic small py-2">
                                            Not Yet Evaluated
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="p-4 border rounded-3 text-center bg-white shadow-sm">
                                        <div class="text-secondary small mb-2 text-uppercase fw-bold">Admission Date</div>
                                        <div class="fw-bold fs-5" th:text="${#temporals.format(enrollment.enrollmentDate, 'MMM dd, yyyy')}">Jan 12, 2024</div>
                                        <div class="small text-secondary" th:text="${#temporals.format(enrollment.enrollmentDate, 'HH:mm')}">14:30</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12" th:if="${enrollment.notes != null && !enrollment.notes.isEmpty()}">
                            <h6 class="text-secondary fw-bold mb-2">Administrative Notes</h6>
                            <div class="p-3 bg-light rounded-3 border-start border-4 border-indigo italic" th:text="${enrollment.notes}">
                                No notes recorded for this enrollment.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</html>
